#!/bin/zsh
# Custom zsh init file for Tmux sessions with dynamic tab naming

# Override the default ssh command to dynamically rename the Tmux window
ssh() {
  if [ -n "$TMUX" ]; then
    # Find the host (first argument that doesn't start with -)
    local host
    for arg in "$@"; do
      if [[ "$arg" != -* ]]; then
        host="${arg#*@}" # handles user@host
        break
      fi
    done

    # Rename window to SSH target
    [ -n "$host" ] && tmux rename-window "$host"

    # Run actual SSH
    command ssh "$@"
  else
    # Not in Tmux â€” just run ssh normally
    command ssh "$@"
  fi
}

# Keep zsh session alive
exec zsh -i
